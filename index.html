
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Fang-Cheng Wang">
      
      
      
      
        <link rel="next" href="cli/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.46">
    
    
      
        <title>Crystmatch Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="css/style-crystmatch.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Crystmatch Documentation" class="md-header__button md-logo" aria-label="Crystmatch Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.7 11.29h.01l-9-9C12.5 2.1 12.26 2 12 2s-.5.1-.71.29l-9 9h.01c-.39.39-.39 1.03 0 1.42h-.01l9 9c.21.19.45.29.71.29s.5-.1.71-.29l9-9h-.01c.39-.39.39-1.03 0-1.42M13 8.28V5.41l4.3 4.3zm-2 0L6.7 9.71l4.3-4.3zm1 1.77L17.84 12 12 13.95 6.16 12zm-1 5.67v2.87l-4.3-4.3zm2 0 4.3-1.43-4.3 4.3z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Crystmatch Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Fangcheng-Wang/crystmatch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    crystmatch
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Crystmatch Documentation" class="md-nav__button md-logo" aria-label="Crystmatch Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.7 11.29h.01l-9-9C12.5 2.1 12.26 2 12 2s-.5.1-.71.29l-9 9h.01c-.39.39-.39 1.03 0 1.42h-.01l9 9c.21.19.45.29.71.29s.5-.1.71-.29l9-9h-.01c.39-.39.39-1.03 0-1.42M13 8.28V5.41l4.3 4.3zm-2 0L6.7 9.71l4.3-4.3zm1 1.77L17.84 12 12 13.95 6.16 12zm-1 5.67v2.87l-4.3-4.3zm2 0 4.3-1.43-4.3 4.3z"/></svg>

    </a>
    Crystmatch Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Fangcheng-Wang/crystmatch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    crystmatch
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-cite" class="md-nav__link">
    <span class="md-ellipsis">
      How to cite
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enumerating-representative-csms" class="md-nav__link">
    <span class="md-ellipsis">
      Enumerating representative CSMs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enumerating-all-csms" class="md-nav__link">
    <span class="md-ellipsis">
      Enumerating all CSMs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualizing-csms-in-a-3d-interactive-plot" class="md-nav__link">
    <span class="md-ellipsis">
      Visualizing CSMs in a 3D interactive plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exporting-csms-as-poscar-or-xdatcar-files" class="md-nav__link">
    <span class="md-ellipsis">
      Exporting CSMs as POSCAR or XDATCAR files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-csm-from-a-pair-of-poscar-files" class="md-nav__link">
    <span class="md-ellipsis">
      Identifying CSM from a pair of POSCAR files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orientation-relationship-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Orientation-relationship analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computing-estimated-strain-energy-density" class="md-nav__link">
    <span class="md-ellipsis">
      Computing estimated strain energy density
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command-line interface
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-cite" class="md-nav__link">
    <span class="md-ellipsis">
      How to cite
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enumerating-representative-csms" class="md-nav__link">
    <span class="md-ellipsis">
      Enumerating representative CSMs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enumerating-all-csms" class="md-nav__link">
    <span class="md-ellipsis">
      Enumerating all CSMs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualizing-csms-in-a-3d-interactive-plot" class="md-nav__link">
    <span class="md-ellipsis">
      Visualizing CSMs in a 3D interactive plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exporting-csms-as-poscar-or-xdatcar-files" class="md-nav__link">
    <span class="md-ellipsis">
      Exporting CSMs as POSCAR or XDATCAR files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-csm-from-a-pair-of-poscar-files" class="md-nav__link">
    <span class="md-ellipsis">
      Identifying CSM from a pair of POSCAR files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orientation-relationship-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Orientation-relationship analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computing-estimated-strain-energy-density" class="md-nav__link">
    <span class="md-ellipsis">
      Computing estimated strain energy density
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="tutorial">Tutorial</h1>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>A solid-solid phase transition establishes an <strong>atom-to-atom correspondence</strong> between the initial and final crystal structures <span class="arithmatex">\(\mathcal A\)</span> and <span class="arithmatex">\(\mathcal B\)</span>. Such correspondence is called a <strong>crystal-structure match (CSM)</strong>. A CSM can be described by a pair of <a href="https://www.vasp.at/wiki/index.php/POSCAR">POSCAR</a> files, which specifies how the lattice deforms from <span class="arithmatex">\(\mathcal A\)</span> to <span class="arithmatex">\(\mathcal B\)</span> and the correspondence between atoms in a supercell of <span class="arithmatex">\(\mathcal A\)</span> and those in <span class="arithmatex">\(\mathcal B\)</span>.</p>
<p>The main functions of <code>crystmatch</code> are as follows:</p>
<ul>
<li>
<p><strong>Enumeration</strong>:</p>
<ul>
<li>Provide a complete list of <strong>representative</strong> CSMs between <span class="arithmatex">\(\mathcal A\)</span> and <span class="arithmatex">\(\mathcal B\)</span>, with user-specified upper bounds on the <strong>multiplicity</strong> and <strong>strain</strong>.</li>
<li>Provide a complete list of CSMs with user-specified upper bounds on the <strong>multiplicity</strong>, <strong>strain</strong>, and <strong>shuffle distance</strong>.</li>
</ul>
</li>
<li>
<p><strong>Analysis</strong>:</p>
<ul>
<li>Read a CSM from a pair of POSCAR files, and save CSMs in the same format.</li>
<li>Calculate the root-mean-squared strain (RMSS), estimated strain energy density, and shuffle distance (RMSD) for each CSM.</li>
<li>Benchmark each CSM by its deviation angle from a given orientation relationship.</li>
<li>Visualize the distribution of strain, shuffle distance, and multiplicity of CSMs in a 2D scatter plot.</li>
<li>Visualize a CSM in a 3D interactive plot.</li>
</ul>
</li>
</ul>
<p>Congruent CSMs (those differ only by a space-group transformation) are identified and excluded from the enumeration using the <strong><a href="https://spglib.readthedocs.io/en/stable/python-interface.html">Spglib</a></strong> library by <a href="https://www.tandfonline.com/doi/full/10.1080/27660400.2024.2384822">Atsushi Togo <em>et al.</em></a></p>
</div>
<h2 id="installation">Installation</h2>
<p>Make sure you have <strong>Python 3.9 or later</strong> installed. You can check it by running:</p>
<div class="highlight"><pre><span></span><code>python3 --version
</code></pre></div>
<p>To install the latest version of <code>crystmatch</code>, run:</p>
<div class="highlight"><pre><span></span><code>pip3 install --upgrade numpy scipy spglib numba matplotlib
pip3 install --upgrade crystmatch
</code></pre></div>
<p>Check whether <code>crystmatch</code> is successfully installed (the first run may take a few minutes to compile the required modules):</p>
<div class="highlight"><pre><span></span><code>crystmatch --version
</code></pre></div>
<p><strong>The current version of <code>crystmatch</code> is <code>2.0.3</code>.</strong></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you prefer using <code>conda</code>, you can install <code>crystmatch</code> by running:
<div class="highlight"><pre><span></span><code>conda install conda-forge::crystmatch
</code></pre></div></p>
</div>
<h2 id="how-to-cite">How to cite</h2>
<p>If you use <code>crystmatch</code> in your research, please cite one of the following paper:</p>
<ul>
<li>
<p><strong><a href="https://arxiv.org/abs/2305.05278">Crystal-Structure Matches in Solid-Solid Phase Transitions</a></strong></p>
<p><em>Physical Review Letters</em> <strong>132</strong>, 086101 (2024)</p>
<div class="highlight"><pre><span></span><code>@article{wang2024crystal,
    title={Crystal-Structure Matches in Solid-Solid Phase Transitions},
    author={Wang, Fang-Cheng and Ye, Qi-Jun and Zhu, Yu-Cheng and Li, Xin-Zheng},
    journal={Phys. Rev. Lett.},
    volume={132},
    number={8},
    pages={086101},
    year={2024},
    publisher={APS},
    doi={10.1103/PhysRevLett.132.086101}
}
</code></pre></div>
</li>
<li>
<p><strong><a href="https://arxiv.org/abs/2506.05105">Classification and Enumeration of Solid-Solid Phase Transition Mechanisms</a></strong></p>
<p><em>Under review</em> (2025)</p>
<div class="highlight"><pre><span></span><code>@article{wang2025classification,
    title={Classification and Enumeration of Solid-Solid Phase Transition Mechanisms},
    author={Wang, Fang-Cheng and Ye, Qi-Jun and Zhu, Yu-Cheng and Li, Xin-Zheng},
    journal={arXiv preprint arXiv:2506.05105},
    year={2025},
    doi={10.48550/arXiv.2506.05105}
}
</code></pre></div>
</li>
</ul>
<h2 id="usage">Usage</h2>
<p>To run <code>crystmatch</code>, one of the following modes must be selected:</p>
<ol>
<li>
<p><strong><code>--enumerate</code></strong></p>
<p>Enumerate a list of CSMs, save them to a <code>CSMLIST.npz</code> file, and perform preliminary analysis. The initial and final crystal structures must be specified in two separate <a href="https://www.vasp.at/wiki/index.php/POSCAR">POSCAR</a> files.</p>
</li>
<li>
<p><strong><code>--read</code></strong></p>
<p>Read CSMs from a <code>CSMLIST.npz</code> file. You can export specific CSMs to POSCARs or XDATCARs, perform orientation-relationship analysis, and visualize them interactively.</p>
</li>
<li>
<p><strong><code>--direct</code></strong></p>
<p>Directly determine a single CSM by two POSCAR files (must have the same number of atoms) and perform detailed analysis.</p>
</li>
</ol>
<p><strong>We strongly recommend starting with the <a href="#examples">examples</a> provided below, and then see <a href="https://fangcheng-wang.github.io/crystmatch/cli/">all available options</a>.</strong> To see the help message, run:</p>
<div class="highlight"><pre><span></span><code>crystmatch --help
</code></pre></div>
<h2 id="examples">Examples</h2>
<h3 id="enumerating-representative-csms">Enumerating representative CSMs</h3>
<p>To enumerate a list of representative CSMs (<em>each representing a unique deformation</em>) between two crystal structures given by POSCAR files <code>Graphite</code> and <code>Diamond</code>, with upper bounds <code>MAX_MU = 2</code> for multiplicity and <code>MAX_STRAIN = 0.4</code> for RMSS, run:</p>
<div class="highlight"><pre><span></span><code>crystmatch --enumerate Graphite Diamond 2 0.4
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Caveat</p>
<p>We recommend you to try <code>MAX_MU = 2</code> and <code>MAX_STRAIN = 0.4</code> first, and then gradually adjust these upper bounds, usually by increasing <code>MAX_MU</code> and decreasing <code>MAX_STRAIN</code>, to obtain desired results. Otherwise, the enumeration may take a very long time, or find no CSMs at all.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Suggestion</p>
<p>If you are using a job scheduling system such as SLURM on a remote server, you can redirect the output of <code>crystmatch</code> to a log file and monitor the progress in real time using:</p>
<div class="highlight"><pre><span></span><code>crystmatch --enumerate Graphite Diamond 2 0.4 &gt; log
</code></pre></div>
</div>
<p>The following files will be created in the current directory:</p>
<div class="highlight"><pre><span></span><code><span class="p">./</span>
<span class="err">├──</span> <span class="n">CSMLIST-m2s0</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">npz</span>       <span class="c"># stores the enumerated CSMs and metadata</span>
<span class="err">├──</span> <span class="n">SUMMARY-m2s0</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">csv</span>       <span class="c"># lists the multiplicity, RMSS, and RMSD</span>
<span class="err">└──</span> <span class="n">SCATTER-m2s0</span><span class="p">.</span><span class="n">4</span><span class="p">.</span><span class="n">pdf</span>       <span class="c"># shows the RMSD-RMSS distribution of the CSMs</span>
</code></pre></div>
<p>Here, <code>CSMLIST-m2s0.4.npz</code> contains all information of the enumerated CSMs and SLMs, but is not intended to be human-readable. <code>SUMMARY-m2s0.4.csv</code> look like this:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ./SUMMARY-m2s0.4.csv</span>

<span class="c1"># csm_id,  slm_id,      mu,  period,  rmss/%,  rmsd/Å</span>
       <span class="mi">0</span><span class="p">,</span>       <span class="mi">0</span><span class="p">,</span>       <span class="mi">1</span><span class="p">,</span>       <span class="mi">4</span><span class="p">,</span>   <span class="mf">21.28</span><span class="p">,</span>  <span class="mf">0.4788</span>
       <span class="mi">1</span><span class="p">,</span>       <span class="mi">1</span><span class="p">,</span>       <span class="mi">1</span><span class="p">,</span>       <span class="mi">4</span><span class="p">,</span>   <span class="mf">26.20</span><span class="p">,</span>  <span class="mf">0.6833</span>
       <span class="mi">2</span><span class="p">,</span>       <span class="mi">2</span><span class="p">,</span>       <span class="mi">1</span><span class="p">,</span>       <span class="mi">4</span><span class="p">,</span>   <span class="mf">30.47</span><span class="p">,</span>  <span class="mf">0.4884</span>
       <span class="mi">3</span><span class="p">,</span>       <span class="mi">3</span><span class="p">,</span>       <span class="mi">1</span><span class="p">,</span>       <span class="mi">4</span><span class="p">,</span>   <span class="mf">36.85</span><span class="p">,</span>  <span class="mf">0.7826</span>
       <span class="mi">4</span><span class="p">,</span>       <span class="mi">4</span><span class="p">,</span>       <span class="mi">1</span><span class="p">,</span>       <span class="mi">4</span><span class="p">,</span>   <span class="mf">37.89</span><span class="p">,</span>  <span class="mf">0.5036</span>
       <span class="mi">5</span><span class="p">,</span>       <span class="mi">5</span><span class="p">,</span>       <span class="mi">1</span><span class="p">,</span>       <span class="mi">4</span><span class="p">,</span>   <span class="mf">39.79</span><span class="p">,</span>  <span class="mf">0.7856</span>
       <span class="mi">6</span><span class="p">,</span>       <span class="mi">6</span><span class="p">,</span>       <span class="mi">2</span><span class="p">,</span>       <span class="mi">8</span><span class="p">,</span>   <span class="mf">14.34</span><span class="p">,</span>  <span class="mf">0.9107</span>
       <span class="mi">7</span><span class="p">,</span>       <span class="mi">7</span><span class="p">,</span>       <span class="mi">2</span><span class="p">,</span>       <span class="mi">8</span><span class="p">,</span>   <span class="mf">19.50</span><span class="p">,</span>  <span class="mf">0.8152</span>
</code></pre></div>
<p><code>SCATTER-m2s0.4.pdf</code> visualizes the RMSD-RMSS-multiplicity distribution of the CSMs.</p>
<h3 id="enumerating-all-csms">Enumerating all CSMs</h3>
<p>To enumerate all CSMs (<em>representative and nonrepresentative</em>) between two crystal structures given by POSCAR files <code>Graphite</code> and <code>Diamond</code>, with upper bounds <code>MAX_MU = 2</code> for multiplicity, <code>MAX_STRAIN = 0.4</code> for RMSS, and <code>MAX_D = 1.8</code> for RMSD, run:</p>
<div class="highlight"><pre><span></span><code>crystmatch --enumerate Graphite Diamond 2 0.4 --all 1.8
</code></pre></div>
<p>The following files will be created in the current directory:</p>
<div class="highlight"><pre><span></span><code><span class="p">./</span>
<span class="err">├──</span> <span class="n">CSMLIST-m2s0</span><span class="p">.</span><span class="n">4d1</span><span class="p">.</span><span class="n">8</span><span class="p">.</span><span class="n">npz</span>     <span class="c"># stores the enumerated CSMs and metadata</span>
<span class="err">├──</span> <span class="n">SUMMARY-m2s0</span><span class="p">.</span><span class="n">4d1</span><span class="p">.</span><span class="n">8</span><span class="p">.</span><span class="n">csv</span>     <span class="c"># lists the multiplicity, RMSS, and RMSD</span>
<span class="err">└──</span> <span class="n">SCATTER-m2s0</span><span class="p">.</span><span class="n">4d1</span><span class="p">.</span><span class="n">8</span><span class="p">.</span><span class="n">pdf</span>     <span class="c"># shows the RMSD-RMSS distribution of the CSMs</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Caveat</p>
<p>Using <code>--all MAX_D</code> with large <code>MAX_MU</code> may result in a very large number of CSMs. We recommend you to try <code>MAX_D = 1.2</code> first, and then gradually increase it to obtain desired results.</p>
</div>
<p>If you wish to apply weighting to atomic species when calculating RMSD, prepare a CSMCAR file and use the <code>--extra</code> option. See <a href="https://fangcheng-wang.github.io/crystmatch/cli/#atomic-weights">CSMCAR</a> for details.</p>
<h3 id="visualizing-csms-in-a-3d-interactive-plot">Visualizing CSMs in a 3D interactive plot</h3>
<p>If you are using <code>crystmatch</code> in a local terminal, you can visualize the CSMs in a <strong>3D interactive plot</strong> by adding the <code>--interact</code> option, as shown below. You can rotate and zoom the plot using your mouse or touchpad.</p>
<p><img alt="3D interactive plot" src="src/interact.jpg" /></p>
<p>However, using <code>--interact</code> in <code>--enumerate</code> mode might be unwise, as you would have to visually inspect numerous CSMs one by one. The recommended workflow is:</p>
<ol>
<li>Perform <a href="#enumerating-representative-csms">enumeration</a> (using <code>--all MAX_D</code> or not), generating <code>SCATTER.pdf</code>, <code>SUMMARY.csv</code>, and <code>CSMLIST.npz</code>.</li>
<li>See <code>SCATTER.pdf</code> and roughly note the RMSS and RMSD values of CSMs of interest.</li>
<li>Identify the corresponding <code>csm_id</code> values for these CSMs in <code>SUMMARY.csv</code>, e.g., <code>1</code>, <code>14</code>, <code>514</code>.</li>
<li>
<p>Read these CSMs from <code>CSMLIST.npz</code> using <code>--read CSMLIST [IND1 IND2 ...]</code>, e.g., run:</p>
<div class="highlight"><pre><span></span><code>crystmatch --read CSMLIST.npz 1 14 514 --interact
</code></pre></div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Suggestion</p>
<p>You can enumerate CSMs on a remote server or WSL, and then download the <code>CSMLIST.npz</code> file to your local machine so that the CSMs can be visualized interactively using <code>--interact</code>.</p>
</div>
<h3 id="exporting-csms-as-poscar-or-xdatcar-files">Exporting CSMs as POSCAR or XDATCAR files</h3>
<p>To export CSMs with <code>csm_id</code> values <code>7</code> and <code>10</code> from <code>CSMLIST.npz</code> as POSCAR files, run:</p>
<div class="highlight"><pre><span></span><code>crystmatch --read CSMLIST.npz 7 10 --poscar
</code></pre></div>
<p>Two folders will be created in <code>./EXPORT-read/</code>, each containing a pair of POSCAR files representing the CSM:</p>
<div class="highlight"><pre><span></span><code><span class="p">./</span><span class="nb">EXPORT-read</span><span class="p">/</span>
<span class="err">├──</span> <span class="n">CSM_7</span><span class="p">/</span>
<span class="err">│</span>   <span class="err">├──</span> <span class="n">POSCAR_I</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">POSCAR_F</span>
<span class="err">└──</span> <span class="n">CSM_10</span><span class="p">/</span>
    <span class="err">├──</span> <span class="n">POSCAR_I</span>
    <span class="err">└──</span> <span class="n">POSCAR_F</span>
</code></pre></div>
<p>You can also export CSMs as XDATCAR files using the <code>--xdatcar</code> option. Both <code>--poscar</code> and <code>--xdatcar</code> are also available in <code>--enumerate</code> and <code>--direct</code> modes.</p>
<h3 id="identifying-csm-from-a-pair-of-poscar-files">Identifying CSM from a pair of POSCAR files</h3>
<p>To identify and analyze the CSM defined by a pair of POSCAR files <code>POSCAR_I</code> and <code>POSCAR_F</code>, run:</p>
<div class="highlight"><pre><span></span><code>crystmatch --direct POSCAR_I POSCAR_F
</code></pre></div>
<p>You can also <code>--interact</code> to visualize the CSM in a 3D interactive plot, or use <code>--xdatcar</code> to interpolate between <code>POSCAR_I</code> and <code>POSCAR_F</code>.</p>
<div class="admonition danger">
<p class="admonition-title">Important</p>
<p>By default, the fractional coordinates in the POSCAR files will be added and subtracted by integers to optimize the CSM. If you are reading a pair of POSCAR files generated by <code>crystmatch</code>, you should use <code>--literal</code> to disable this behavior. See <a href="http://127.0.0.1:8000/cli/#all-options">all options</a> for details.</p>
</div>
<p>To enumerate all CSMs with identical initial and final supercells as <code>POSCAR_I</code> and <code>POSCAR_F</code>, but different atomic correspondences, run:</p>
<div class="highlight"><pre><span></span><code>crystmatch --direct POSCAR_I POSCAR_F --all MAX_D
</code></pre></div>
<p>Here, <code>MAX_D</code> should be set to a smaller value if the supercells contain many atoms.</p>
<h3 id="orientation-relationship-analysis">Orientation-relationship analysis</h3>
<p>In <code>--enumerate</code>, <code>--read</code>, and even <code>--direct</code> modes, you can perform orientation-relationship analysis by using <code>--orientation ASSUM</code> and <code>--extra CSMCAR</code>. See <a href="https://fangcheng-wang.github.io/crystmatch/cli/#orientation-relationship">CSMCAR</a> for details.</p>
<h3 id="computing-estimated-strain-energy-density">Computing estimated strain energy density</h3>
<p>If you want to use the estimated strain energy density, rather than the RMSS, to quantify the strain, you should provide the elastic tensors of the initial and final structures in the <a href="https://fangcheng-wang.github.io/crystmatch/cli/#elastic-tensors">CSMCAR</a> file.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2013–2025 Xin-Zheng Li Group. All rights reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>