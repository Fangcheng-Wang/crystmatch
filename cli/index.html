
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Fang-Cheng Wang">
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../api/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.46">
    
    
      
        <title>Command-line interface - Crystmatch Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="../css/style-crystmatch.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#command-line-interface" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Crystmatch Documentation" class="md-header__button md-logo" aria-label="Crystmatch Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.7 11.29h.01l-9-9C12.5 2.1 12.26 2 12 2s-.5.1-.71.29l-9 9h.01c-.39.39-.39 1.03 0 1.42h-.01l9 9c.21.19.45.29.71.29s.5-.1.71-.29l9-9h-.01c.39-.39.39-1.03 0-1.42M13 8.28V5.41l4.3 4.3zm-2 0L6.7 9.71l4.3-4.3zm1 1.77L17.84 12 12 13.95 6.16 12zm-1 5.67v2.87l-4.3-4.3zm2 0 4.3-1.43-4.3 4.3z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Crystmatch Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Command-line interface
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Fangcheng-Wang/crystmatch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    crystmatch
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Crystmatch Documentation" class="md-nav__button md-logo" aria-label="Crystmatch Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.7 11.29h.01l-9-9C12.5 2.1 12.26 2 12 2s-.5.1-.71.29l-9 9h.01c-.39.39-.39 1.03 0 1.42h-.01l9 9c.21.19.45.29.71.29s.5-.1.71-.29l9-9h-.01c.39-.39.39-1.03 0-1.42M13 8.28V5.41l4.3 4.3zm-2 0L6.7 9.71l4.3-4.3zm1 1.77L17.84 12 12 13.95 6.16 12zm-1 5.67v2.87l-4.3-4.3zm2 0 4.3-1.43-4.3 4.3z"/></svg>

    </a>
    Crystmatch Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Fangcheng-Wang/crystmatch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    crystmatch
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Command-line interface
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Command-line interface
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#flowchart" class="md-nav__link">
    <span class="md-ellipsis">
      Flowchart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csmcar" class="md-nav__link">
    <span class="md-ellipsis">
      CSMCAR
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CSMCAR">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elastic-tensors" class="md-nav__link">
    <span class="md-ellipsis">
      Elastic tensors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atomic-weights" class="md-nav__link">
    <span class="md-ellipsis">
      Atomic weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orientation-relationship" class="md-nav__link">
    <span class="md-ellipsis">
      Orientation relationship
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#all-options" class="md-nav__link">
    <span class="md-ellipsis">
      All options
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#flowchart" class="md-nav__link">
    <span class="md-ellipsis">
      Flowchart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csmcar" class="md-nav__link">
    <span class="md-ellipsis">
      CSMCAR
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CSMCAR">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elastic-tensors" class="md-nav__link">
    <span class="md-ellipsis">
      Elastic tensors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atomic-weights" class="md-nav__link">
    <span class="md-ellipsis">
      Atomic weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orientation-relationship" class="md-nav__link">
    <span class="md-ellipsis">
      Orientation relationship
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#all-options" class="md-nav__link">
    <span class="md-ellipsis">
      All options
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="command-line-interface">Command-line interface</h1>
<h2 id="flowchart">Flowchart</h2>
<pre class="mermaid"><code>flowchart TB
  config[/"if &lt;code style='color: #dd0099 !important; background-color: var(--md-code-bg-color); border-radius: .1rem; font-size: .85em; padding: 0 .2941176471em; font-family: monospace; word-break: break-word;'&gt;--extra&lt;/code&gt;,&lt;br&gt;read **CSMCAR** file"/] --&gt; mode;
  mode{how to&lt;br&gt;**get CSMs**} --&gt; |"&lt;code style='color: #dd0099 !important; background-color: var(--md-code-bg-color); border-radius: .1rem; font-size: .85em; padding: 0 .2941176471em; font-family: monospace; word-break: break-word;'&gt;--enumerate&lt;/code&gt;"| modeE[enumerate a list of&lt;br&gt;**representative** CSMs];
  modeE --&gt; all;
  mode --&gt; |"&lt;code style='color: #dd0099 !important; background-color: var(--md-code-bg-color); border-radius: .1rem; font-size: .85em; padding: 0 .2941176471em; font-family: monospace; word-break: break-word;'&gt;--read&lt;/code&gt;"| modeR["read a list of CSMs&lt;br&gt;from an **NPZ** file&lt;br&gt;"];
  modeR --&gt; all;
  mode --&gt; |"&lt;code style='color: #dd0099 !important; background-color: var(--md-code-bg-color); border-radius: .1rem; font-size: .85em; padding: 0 .2941176471em; font-family: monospace; word-break: break-word;'&gt;--direct&lt;/code&gt;"| modeD["read a single CSM from&lt;br&gt;a pair of **POSCAR** files"];
  modeD --&gt; all["if &lt;code style='color: #dd0099 !important; background-color: var(--md-code-bg-color); border-radius: .1rem; font-size: .85em; padding: 0 .2941176471em; font-family: monospace; word-break: break-word;'&gt;--all&lt;/code&gt;, enumerate&lt;br&gt;**all** CSMs for each SLM"];
  all --&gt; export["**export** individual CSMs as&lt;br&gt;&lt;code style='color: #dd0099 !important; background-color: var(--md-code-bg-color); border-radius: .1rem; font-size: .85em; padding: 0 .2941176471em; font-family: monospace; word-break: break-word;'&gt;--poscar --xdatcar&lt;/code&gt;"];
  export --&gt; visualize["**visualize** CSMs using&lt;br&gt;&lt;code style='color: #dd0099 !important; background-color: var(--md-code-bg-color); border-radius: .1rem; font-size: .85em; padding: 0 .2941176471em; font-family: monospace; word-break: break-word;'&gt;--scatter --interact&lt;/code&gt;"]</code></pre>
<h2 id="csmcar">CSMCAR</h2>
<p>CSMCAR is a plain text file that provides extra information for generating and analyzing CSMs. <code>crystmatch</code> will <strong>not</strong> read a CSMCAR file unless it is specified in the <code>--extra</code> option, as:</p>
<div class="highlight"><pre><span></span><code>crystmatch --enumerate graphite.poscar diamond.poscar 2 0.3 --extra CSMCAR.txt
</code></pre></div>
<p>CSMCAR may contain at most three fields:</p>
<ul>
<li>The elastic tensors</li>
<li>The atomic weights used to defined the shuffle distance</li>
<li>The orientation relationship used to benchmark CSMs</li>
</ul>
<h3 id="elastic-tensors">Elastic tensors</h3>
<p>If you want to use the strain energy density <span class="arithmatex">\(w\)</span>, instead of the root-mean-square strain <span class="arithmatex">\(\bar\varepsilon\)</span>, as the pruning criterion, the CSMCAR file should contain elastic tensors of the initial and final structures. They must be specified as <span class="arithmatex">\(6\times 6\)</span> symmetric matrices (<a href="https://en.wikipedia.org/wiki/Voigt_notation">Voigt notation</a>) as:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ./CSMCAR.txt</span>

<span class="n">initial</span> <span class="n">elastic</span> <span class="n">tensor</span><span class="p">:</span>
    <span class="n">XX</span>    <span class="mf">268.6236</span>     <span class="mf">46.1585</span>     <span class="mf">47.5328</span>      <span class="mf">0.6739</span>      <span class="mf">0.9388</span>     <span class="o">-</span><span class="mf">1.8586</span>
    <span class="n">YY</span>     <span class="mf">46.1585</span>    <span class="mf">268.5367</span>     <span class="mf">48.5034</span>      <span class="mf">0.1023</span>      <span class="mf">1.8528</span>     <span class="o">-</span><span class="mf">3.2724</span>
    <span class="n">ZZ</span>     <span class="mf">47.5328</span>     <span class="mf">48.5034</span>    <span class="mf">268.7187</span>     <span class="o">-</span><span class="mf">0.0438</span>      <span class="mf">0.8634</span>     <span class="o">-</span><span class="mf">1.6993</span>
    <span class="n">XY</span>      <span class="mf">0.6739</span>      <span class="mf">0.1023</span>     <span class="o">-</span><span class="mf">0.0438</span>     <span class="mf">44.0620</span>     <span class="o">-</span><span class="mf">1.7433</span>      <span class="mf">1.4076</span>
    <span class="n">YZ</span>      <span class="mf">0.9388</span>      <span class="mf">1.8528</span>      <span class="mf">0.8634</span>     <span class="o">-</span><span class="mf">1.7433</span>     <span class="mf">42.5860</span>     <span class="o">-</span><span class="mf">0.5327</span>
    <span class="n">ZX</span>     <span class="o">-</span><span class="mf">1.8586</span>     <span class="o">-</span><span class="mf">3.2724</span>     <span class="o">-</span><span class="mf">1.6993</span>      <span class="mf">1.4076</span>     <span class="o">-</span><span class="mf">0.5327</span>     <span class="mf">42.2492</span>

<span class="n">final</span> <span class="n">elastic</span> <span class="n">tensor</span><span class="p">:</span>
    <span class="n">XX</span>    <span class="mf">262.9004</span>    <span class="mf">128.7075</span>    <span class="mf">102.3784</span>    <span class="o">-</span><span class="mf">22.5882</span>      <span class="mf">5.6997</span>      <span class="mf">7.9351</span>
    <span class="n">YY</span>    <span class="mf">128.7075</span>    <span class="mf">262.8757</span>    <span class="mf">102.3694</span>    <span class="o">-</span><span class="mf">21.7608</span>      <span class="mf">8.0470</span>      <span class="mf">5.6492</span>
    <span class="n">ZZ</span>    <span class="mf">102.3784</span>    <span class="mf">102.3694</span>    <span class="mf">295.9447</span>     <span class="mf">32.4762</span>    <span class="o">-</span><span class="mf">19.2804</span>    <span class="o">-</span><span class="mf">19.2551</span>
    <span class="n">XY</span>    <span class="o">-</span><span class="mf">22.5882</span>    <span class="o">-</span><span class="mf">21.7608</span>     <span class="mf">32.4762</span>    <span class="mf">138.7953</span>      <span class="mf">5.1622</span>      <span class="mf">5.4153</span>
    <span class="n">YZ</span>      <span class="mf">5.6997</span>      <span class="mf">8.0470</span>    <span class="o">-</span><span class="mf">19.2804</span>      <span class="mf">5.1622</span>    <span class="mf">104.6801</span>     <span class="mf">34.9596</span>
    <span class="n">ZX</span>      <span class="mf">7.9351</span>      <span class="mf">5.6492</span>    <span class="o">-</span><span class="mf">19.2551</span>      <span class="mf">5.4153</span>     <span class="mf">34.9596</span>    <span class="mf">104.6258</span>
</code></pre></div>
<p>The axis name must be given in each row. The above CSMCAR is in the order of <code>XX</code>, <code>YY</code>, <code>ZZ</code>, <code>XY</code>, <code>YZ</code>, <code>ZX</code>, which is the same as <a href="https://www.vasp.at/wiki/index.php/Phonons_from_finite_differences">VASP</a>. However, the elastic tensors provided by <a href="https://docs.materialsproject.org/methodology/materials-methodology/elasticity">Materials Project</a> are in the order of <code>XX</code>, <code>YY</code>, <code>ZZ</code>, <code>YZ</code>, <code>ZX</code>, <code>XY</code>, in which case you should write the axis name in the same order.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once you use <code>--extra</code> or <code>-e</code> and provide the elastic tensors, the <code>--enumerate</code> mode will interpret its last parameter <code>MAX_STRAIN</code> as the maximum strain energy density, not the maximum root-mean-square strain (RMSS). The unit of <code>MAX_STRAIN</code> is the same as the unit of the elastic tensors in the CSMCAR file.</p>
<p>If you want to use the RMSS as the pruning criterion, and then calculate the strain energy density <span class="arithmatex">\(w\)</span> for each CSM, please use <code>crystmatch</code> as a <a href="https://fangcheng-wang.github.io/crystmatch/api/">Python module</a>.</p>
</div>
<h3 id="atomic-weights">Atomic weights</h3>
<p>If the initial and final structures involve more than one atomic species, you can specifie their atomic weights in the CSMCAR file as:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ./CSMCAR.txt</span>

<span class="n">atomic</span> <span class="n">weights</span><span class="p">:</span>
    <span class="n">Cs</span>      <span class="n">Cl</span>
    <span class="mf">132.9</span>   <span class="mf">35.45</span>
</code></pre></div>
<p><code>crystmatch</code> will normalize these weights and use them to define the shuffle distance</p>
<div class="arithmatex">\[
d(\mathcal{J})=\min_{\mathbf{t}_0 \in \mathbb{R}^{3}}\sqrt{\sum_{i=1}^{\tilde Z}\theta_i\left|\tilde{\mathcal{J}}(\tilde{\mathbf{a}}_i)+\mathbf{t}_0-\tilde{\mathbf{a}}_i\right|^2},
\]</div>
<p>where <span class="arithmatex">\(\mathcal{J}\colon\mathcal{A}\to\mathcal{B}\)</span> is a CSM, <span class="arithmatex">\(\tilde{\mathcal{J}}\colon\tilde{\mathcal{A}}\to\tilde{\mathcal{B}}\)</span> its standard shuffle, <span class="arithmatex">\(\tilde Z\)</span> its period, <span class="arithmatex">\(\tilde{\mathbf{a}}_i\in\tilde{\mathcal{A}}\)</span> the position of the <span class="arithmatex">\(i\)</span>-th atom, and <span class="arithmatex">\(\theta_i\)</span> the normalized weight of the <span class="arithmatex">\(i\)</span>-th atom. See <a href="https://arxiv.org/abs/2506.05105">this paper</a> for more details.</p>
<h3 id="orientation-relationship">Orientation relationship</h3>
<p>To benchmark CSMs with a given orientation relationship, two parameters must be specified:</p>
<ol>
<li>
<p>The orientation relationship, provided in the CSMCAR file as:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ./CSMCAR.txt</span>

<span class="n">orientation</span> <span class="n">relationship</span><span class="p">:</span>
    <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="o">||</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span>
    <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">||</span> <span class="mi">0</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">0</span>
</code></pre></div>
<p>Here, exactly two rows after <code>orientation relationship</code> will be read. Each row specifies a parallelism between two <strong>crystal directions</strong> of the initial and final structures. These crystal directions are denoted as <a href="https://en.wikipedia.org/wiki/Miller_index">Miller indices</a></p>
<div class="arithmatex">\[
[hk\ell]=h\mathbf{a}+k\mathbf{b}+\ell\mathbf{c},
\]</div>
<p>where <span class="arithmatex">\(\mathbf{a}, \mathbf{b}, \mathbf{c}\)</span> are the lattice vectors of the <strong>conventional cell</strong>. They are determined by <strong><a href="https://spglib.readthedocs.io/en/stable/definition.html#def-idealize-cell">Spglib</a></strong> and depend only on the crystal systems of the initial and final structures.</p>
<div class="admonition warning">
<p class="admonition-title">Caveat</p>
<p><strong>The conventional cell is not the primitive cell if the <a href="https://en.wikipedia.org/wiki/Bravais_lattice">Bravais lattice</a> is base-centered, face-centered, or body-centered.</strong> We recommend using</p>
<div class="highlight"><pre><span></span><code>crystmatch --read CSMLIST.npz 0 --interact
</code></pre></div>
<p>to check if the conventional cell is the same as you expect.</p>
</div>
</li>
<li>
<p>The assumption used to determine the orientation of the final structure, must be one of the following:</p>
<ul>
<li>
<p><code>'norot'</code>: The final lattice is deformed from the initial one <strong>without rotation</strong>.</p>
</li>
<li>
<p><code>'uspfixed'</code>: One of the two <strong>uniformly-scaled planes (USPs)</strong> is fixed.</p>
</li>
</ul>
<p>For more details, see the supplemental material of <a href="https://arxiv.org/abs/2305.05278">this paper</a>.</p>
</li>
</ol>
<p>If you have a <code>CSMLIST.npz</code> file and a <code>CSMCAR.txt</code> file containing an orientation relationship, you can run:</p>
<p><div class="highlight"><pre><span></span><code>crystmatch --read CSMLIST.npz --extra CSMCAR.txt --orientation &#39;norot&#39;
</code></pre></div>
or</p>
<div class="highlight"><pre><span></span><code>crystmatch --read CSMLIST.npz --extra CSMCAR.txt --orientation &#39;uspfixed&#39;
</code></pre></div>
<h2 id="all-options">All options</h2>
<div class="highlight"><pre><span></span><code>crystmatch<span class="w"> </span><span class="o">[</span>--help<span class="o">]</span><span class="w"> </span><span class="o">[</span>--version<span class="o">]</span><span class="w"> </span><span class="se">\ </span><span class="w">                              </span><span class="c1"># package information</span>
<span class="w">           </span><span class="o">[</span>--extra<span class="w"> </span>CSMCAR<span class="o">]</span><span class="w"> </span><span class="o">[</span>--tol<span class="w"> </span>TOL<span class="o">]</span><span class="w"> </span><span class="se">\ </span><span class="w">                      </span><span class="c1"># global settings</span>
<span class="w">           </span><span class="o">[</span>--enumerate<span class="w"> </span>POSCAR_I<span class="w"> </span>POSCAR_F<span class="w"> </span>MAX_MU<span class="w"> </span>MAX_STRAIN<span class="o">]</span><span class="w"> </span><span class="se">\ </span><span class="w"> </span><span class="c1"># enumerate CSMs</span>
<span class="w">           </span><span class="o">[</span>--read<span class="w"> </span>CSMLIST<span class="w"> </span><span class="o">[</span>IND1<span class="w"> </span>IND2<span class="w"> </span>...<span class="o">]]</span><span class="w"> </span><span class="se">\ </span><span class="w">                  </span><span class="c1"># read CSMs from NPZ</span>
<span class="w">           </span><span class="o">[</span>--direct<span class="w"> </span>POSCAR_I<span class="w"> </span>POSCAR_F<span class="o">]</span><span class="w"> </span><span class="o">[</span>--literal<span class="o">]</span><span class="w"> </span><span class="se">\ </span><span class="w">          </span><span class="c1"># single CSM analysis</span>
<span class="w">           </span><span class="o">[</span>--all<span class="w"> </span>MAX_D<span class="o">]</span><span class="w"> </span><span class="se">\ </span><span class="w">                                     </span><span class="c1"># exhaustive enumeration</span>
<span class="w">           </span><span class="o">[</span>--interact<span class="w"> </span><span class="o">[</span>SIZE<span class="o">]]</span><span class="w"> </span><span class="se">\ </span><span class="w">                               </span><span class="c1"># 3D interactive plot</span>
<span class="w">           </span><span class="o">[</span>--poscar<span class="w"> </span><span class="o">[</span>ASSUM<span class="o">]]</span><span class="w"> </span><span class="o">[</span>--xdatcar<span class="w"> </span><span class="o">[</span>ASSUM<span class="o">]]</span><span class="w"> </span><span class="se">\ </span><span class="w">            </span><span class="c1"># export individual CSMs</span>
<span class="w">           </span><span class="o">[</span>--orientation<span class="w"> </span>ASSUM<span class="o">]</span><span class="w"> </span><span class="se">\ </span><span class="w">                             </span><span class="c1"># orientation analysis</span>
<span class="w">           </span><span class="o">[</span>--csv<span class="o">]</span><span class="w"> </span><span class="o">[</span>--scatter<span class="o">]</span><span class="w">                                  </span><span class="c1"># summarize and visualize</span>
</code></pre></div>
<p>If you are not familiar with <code>crystmatch</code>, we recommend you first read the <a href="https://fangcheng-wang.github.io/crystmatch/">tutorial</a> and then come back to this page for a detailed explanation of the options.</p>
<ul>
<li>
<p><code>-h</code>, <code>--help</code></p>
<p>Show help message and exit.</p>
</li>
<li>
<p><code>-V</code>, <code>-v</code>, <code>--version</code></p>
<p>Show program's version number and exit.</p>
</li>
<li>
<p><code>-E POSCAR_I POSCAR_F MAX_MU MAX_STRAIN</code>, <code>--enumerate POSCAR_I POSCAR_F MAX_MU MAX_STRAIN</code></p>
<p>Enumerate representative CSMs (those with the minimal shuffle distance among all CSMs that share the same deformation gradient) between the initial and final structures defined in <code>POSCAR_I</code> and <code>POSCAR_F</code>, with <code>MAX_MU</code> and <code>MAX_STRAIN</code> as upper bounds for the multiplicity and RMSS. If elastic tensors are provided, <code>MAX_STRAIN</code> is instead interpreted as the maximum strain energy density (with the same unit as in the <a href="#elastic-tensors">CSMCAR</a> file).</p>
</li>
<li>
<p><code>-R CSMLIST [IND1 IND2 ...]</code>, <code>--read CSMLIST [IND1 IND2 ...]</code></p>
<p>Read CSMs from an existing NPZ file <code>CSMLIST</code>. If the indices <code>IND1 IND2 ...</code> are provided, only load the CSMs with the given indices.</p>
</li>
<li>
<p><code>-D POSCAR_I POSCAR_F</code>, <code>--direct POSCAR_I POSCAR_F</code></p>
<p>Directly read a single CSM from a pair of POSCAR files <code>POSCAR_I</code> and <code>POSCAR_F</code>. The CSM is determined such that each cell vector or atomic position in <code>POSCAR_I</code> is mapped to the corresponding one (with the same row index) in <code>POSCAR_F</code>. <strong>Make sure that the cell vectors and atomic positions in <code>POSCAR_I</code> and <code>POSCAR_F</code> are ordered as you expect.</strong></p>
<div class="admonition warning">
<p class="admonition-title">Caveat</p>
<p>When writing the POSCAR, some softwares may add or subtract integers (cell vectors) to the fractional (cartesian) coordinates of the atoms to make them within the cell, thus altering the CSM. To avoid this issue, <code>crystmatch</code> will automatically add integers to the fractional coordinates to minimize the shuffle distance. However, if you are confident that the fractional coordinates represent the true initial and final atomic positions, use <code>--literal</code> to keep the original fractional coordinates.</p>
</div>
</li>
<li>
<p><code>-l</code>, <code>--literal</code></p>
<p>Keep the original fractional coordinates in the POSCAR files when using <code>--direct</code>.</p>
</li>
<li>
<p><code>-e CSMCAR</code>, <code>--extra CSMCAR</code></p>
<p>Load extra parameters from a <a href="#csmcar">CSMCAR</a> file, including the <a href="#elastic-tensors">elastic tensors</a>, the <a href="#atomic-weights">atomic weights</a>, and the <a href="#orientation-relationship">orientation relationship</a> used to benchmark CSMs.</p>
</li>
<li>
<p><code>-a MAX_D</code>, <code>--all MAX_D</code></p>
<p>Additionally enumerate all CSMs (instead of only the representative or read ones) for each SLM, with <code>MAX_D</code> as the upper bound for the shuffle distance.</p>
</li>
<li>
<p><code>-t TOL</code>, <code>--tol TOL</code></p>
<p>Tolerance in angstroms for detecting symmetry. Default is <code>1e-3</code>.</p>
</li>
<li>
<p><code>-i [SIZE]</code>, <code>--interact [SIZE]</code></p>
<p>Interactively visualize each CSM using a 3D plot. <code>SIZE</code> specifies the radius of the cluster to display, which we recommend to be smaller than <code>2.0</code>. Use <code>SIZE = 0</code> to display the cell contents only. Default is <code>1.2</code>.</p>
<div class="admonition warning">
<p class="admonition-title">Caveat</p>
<p>The interactive plot may not work properly in some environments, such as Windows Subsystem for Linux (WSL) or remote servers.</p>
</div>
</li>
<li>
<p><code>-o ASSUM</code>, <code>--orientation ASSUM</code></p>
<p>Calculate the deviation angle from the given <a href="#orientation-relationship">orientation relationship</a> for each CSM. Only works when the orientation relationship is provided by <code>--extra</code>. The <a href="#orientation-relationship">orientation of the final structure</a> is determined by <code>ASSUM</code>, which must be specified as <code>'norot'</code> or <code>'uspfixed'</code>.</p>
</li>
<li>
<p><code>-p [ASSUM]</code>, <code>--poscar [ASSUM]</code></p>
<p>Export each enumerated/read CSM as a pair of POSCAR files. <code>ASSUM</code> must be <code>'norot'</code> or <code>'uspfixed'</code>. Default is <code>'norot'</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code>ASSUM = 'uspfixed'</code>, two final structures (instead of one) are created since there are two USPs.</p>
</div>
</li>
<li>
<p><code>-x [ASSUM]</code>, <code>--xdatcar [ASSUM]</code></p>
<p>Export each CSM as an XDATCAR file with 100 frames, similar to <code>--poscar</code>.</p>
</li>
</ul>
<p><strong>These options are automatically enabled when using <code>--enumerate</code>, <code>--all</code> or <code>--orientation</code>:</strong></p>
<ul>
<li>
<p><code>-c</code>, <code>--csv</code></p>
<p>Create CSV file containing the multiplicities, RMSS, shuffle distances, estimated strain energy densities (if elastic tensors are provided) and deviation angles (if <code>--orientation</code> is used) of the enumerated/read CSMs. </p>
</li>
<li>
<p><code>-s</code>, <code>--scatter</code></p>
<p>Create scatter plot in PDF format containing all enumerated/read CSMs.</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2013â€“2025 Xin-Zheng Li Group. All rights reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>